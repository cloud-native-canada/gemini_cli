
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../images/gemini.jpeg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Stern - Gemini Code Assist Workshop 2 - Gemini CLI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#stern" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Gemini Code Assist Workshop 2 - Gemini CLI" class="md-header__button md-logo" aria-label="Gemini Code Assist Workshop 2 - Gemini CLI" data-md-component="logo">
      
  <img src="../../images/gemini_logo.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gemini Code Assist Workshop 2 - Gemini CLI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Stern
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Gemini Code Assist Workshop 2 - Gemini CLI" class="md-nav__button md-logo" aria-label="Gemini Code Assist Workshop 2 - Gemini CLI" data-md-component="logo">
      
  <img src="../../images/gemini_logo.jpeg" alt="logo">

    </a>
    Gemini Code Assist Workshop 2 - Gemini CLI
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../0_install_cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2_cli_vibecoding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI - Vibecoding
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1_cli_params/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI - Command Parameters
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3_cli_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI - Configuration via settings.json
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5_cli_mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI - MCP Servers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6_cli_custom_commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI - Custom slash commands
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7_cli_coding_style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    (EXTRA) Gemini CLI - Coding styles with Gemini.md
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8_cli_mcp_bq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix A. MCP server for BQ
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dumping-the-logs-with-kubectl" class="md-nav__link">
    <span class="md-ellipsis">
      Dumping the logs with kubectl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-stern" class="md-nav__link">
    <span class="md-ellipsis">
      Using Stern
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next" class="md-nav__link">
    <span class="md-ellipsis">
      Next
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="stern">Stern<a class="headerlink" href="#stern" title="Permanent link">&para;</a></h1>
<p><a href="https://github.com/stern/stern">Stern</a> allows you to tail multiple pods on Kubernetes and multiple containers within the pod. Each result is color coded for quicker debugging.</p>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that the <a href="https://github.com/wercker/stern">original Stern repo</a> was forked at <a href="https://github.com/stern/stern">https://github.com/stern/stern</a> as the other one is not maintained anymore.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Apple MacOsX</label><label for="__tabbed_1_2">Go</label><label for="__tabbed_1_3">Krew</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>brew<span class="w"> </span>install<span class="w"> </span>stern
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>go<span class="w"> </span>install<span class="w"> </span>github.com/stern/stern@latest
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>kubectl<span class="w"> </span>krew<span class="w"> </span>install<span class="w"> </span>stern
</code></pre></div>
</div>
</div>
</div>
<h2 id="dumping-the-logs-with-kubectl">Dumping the logs with kubectl<a class="headerlink" href="#dumping-the-logs-with-kubectl" title="Permanent link">&para;</a></h2>
<p>First let's add a new <code>deployment</code> which generate some logs:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>multi-deployment.yaml<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="s">apiVersion: apps/v1</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="s">kind: Deployment</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="s">metadata:</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="s">  labels:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="s">    app: multi-deployment</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="s">  name: multi-deployment</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="s">  namespace: default</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="s">spec:</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="s">  replicas: 2</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="s">  revisionHistoryLimit: 10</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="s">  selector:</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="s">    matchLabels:</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="s">      app: multi-deployment</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="s">  template:</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="s">    metadata:</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="s">      labels:</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="s">        app: multi-deployment</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="s">    spec:</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="s">      containers:</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="s">      - image: alpine:latest</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="s">        imagePullPolicy: Always</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="s">        name: first</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="s">        command: [&quot;/bin/sh&quot;, &quot;-c&quot;]</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="s">        args:</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="s">          - echo &quot;starting first container&quot;;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="s">            tail -f /dev/null</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="s">      - image: alpine:latest</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="s">        imagePullPolicy: Always</span>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="s">        name: second</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="s">        command: [&quot;/bin/sh&quot;, &quot;-c&quot;]</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="s">        args:</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="s">          - echo &quot;starting second container&quot;;</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="s">            tail -f /dev/null</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="s">EOF</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>k<span class="w"> </span>apply<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>-f<span class="w"> </span>multi-deployment.yaml
</code></pre></div>
<p>Two new pods are created, each with two containers:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>kgp<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>multi-deployment
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>NAME<span class="w">                                </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w">   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>4m52s
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w">   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>4m49s
</code></pre></div></p>
<p>Here is a command to access the logs:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>k<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>multi-deployment
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Defaulted<span class="w"> </span>container<span class="w"> </span><span class="s2">&quot;first&quot;</span><span class="w"> </span>out<span class="w"> </span>of:<span class="w"> </span>first,<span class="w"> </span>second
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Defaulted<span class="w"> </span>container<span class="w"> </span><span class="s2">&quot;first&quot;</span><span class="w"> </span>out<span class="w"> </span>of:<span class="w"> </span>first,<span class="w"> </span>second
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>starting<span class="w"> </span>first<span class="w"> </span>container
</code></pre></div></p>
<p><code>kubectl</code> is complaining that our pods have multiple <code>containers</code>, and is only dumping the logs from the first one.</p>
<p>Using the <code>--all-containers</code> argument allows to dump them all:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>k<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>multi-deployment<span class="w"> </span>--all-containers
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>starting<span class="w"> </span>second<span class="w"> </span>container
</code></pre></div></p>
<p>As you can see, there's multiple things to complain about:</p>
<ul>
<li>it's not easy to read</li>
<li>it is based on <code>label</code> selectors</li>
<li>you have to select one container if there are many in the pod</li>
<li>when dumping all containers, we have no idea which one logged what</li>
<li>we have to select a namespace or use the current one</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By default, <code>kubectl logs</code> displays the logs and stop. The <code>--follow</code> (<code>-f</code>) option must be set to <code>tail</code> the logs .</p>
</div>
<h2 id="using-stern">Using Stern<a class="headerlink" href="#using-stern" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/stern/stern">Stern</a> is a small app that extend how logs are dumped, adding the name of the pod, the container inside the pod, and using colors to differentiate which is which. It also add an easier way to select the pods to display.</p>
<p><code>stern</code> does not have to use <code>label</code> selectors (but you can). By default it use the argument as a regular-expression to search for matching pods. Ex:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>stern<span class="w"> </span>multi
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>second<span class="w"> </span>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>second<span class="w"> </span>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
</code></pre></div></p>
<p>Here's a detailed explanation:</p>
<p><img alt="stern detailed" src="../img/stern-detailed.png" /></p>
<p>Stern is really versatile, and here are some command examples, based on the previous <code>multi-deployment</code> logs:</p>
<ul>
<li>
<p>search pods per labels (as with <code>k logs</code>)</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>stern<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>multi-deployment
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>second<span class="w"> </span>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>second<span class="w"> </span>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
</code></pre></div>
- search pods in all namespaces</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>k<span class="w"> </span>ns<span class="w"> </span>kube-system
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>stern<span class="w"> </span>multi<span class="w"> </span>--all-namespaces
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>second<span class="w"> </span>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>second<span class="w"> </span>starting<span class="w"> </span>second<span class="w"> </span>container
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>multi-deployment-6f4fd4f8b8-vnqbx<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
</code></pre></div>
- Exclude some logs with a matching pattern</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># exclude logs with [INFO]</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>stern<span class="w"> </span>-ndefault<span class="w"> </span>multi<span class="w"> </span>--exclude<span class="w"> </span><span class="s2">&quot;second&quot;</span>
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-zswfr<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-zswfr<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>+<span class="w"> </span>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>multi-deployment-6f4fd4f8b8-lg2b8<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>multi-deployment-6f4fd4f8b8-zswfr<span class="w"> </span>first<span class="w"> </span>starting<span class="w"> </span>first<span class="w"> </span>container
</code></pre></div>
- Tail only the latest logs (drop old logs)</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>stern<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>coredns<span class="w"> </span>--tail<span class="w"> </span><span class="m">1</span>
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>+<span class="w"> </span>coredns-6d4b75cb6d-plpj9<span class="w"> </span>›<span class="w"> </span>coredns
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>+<span class="w"> </span>coredns-6d4b75cb6d-cw498<span class="w"> </span>›<span class="w"> </span>coredns
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>coredns-6d4b75cb6d-cw498<span class="w"> </span>coredns<span class="w"> </span>linux/amd64,<span class="w"> </span>go1.17.1,<span class="w"> </span>13a9191
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>coredns-6d4b75cb6d-plpj9<span class="w"> </span>coredns<span class="w"> </span>linux/amd64,<span class="w"> </span>go1.17.1,<span class="w"> </span>13a9191
</code></pre></div>
- Tail logs in Json</p>
<p>This is great as you can use <code>jq</code> to pretty-print the logs, or apply some complex <code>json</code> filtering:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The real log message is in the <code>message</code> field, and is encoded. In the case your logs are already JSON, they will be double-encoded, and not pure JSON.</p>
<p>The latest version of Stern (<code>1.22.0</code> or newer) inclused two other <code>--ouptput</code> modes: 
- <code>extjson</code>
    This is an extended JSON output, used when your logs are already JSON. In this case, they will not be double-encoded.
- <code>ppextjson</code>
    This is the same as above but keeping the stern colors to identify pods and adding pretty-print indentation so it not necessary to use <code>jq</code></p>
</div>
<p>Here is an updated deployment that logs in json:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>multi-deployment.yaml<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="s">apiVersion: apps/v1</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="s">kind: Deployment</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="s">metadata:</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="s">  labels:</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="s">    app: multi-deployment</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="s">  name: multi-deployment</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="s">  namespace: default</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="s">spec:</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="s">  replicas: 1</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="s">  revisionHistoryLimit: 10</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="s">  selector:</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="s">    matchLabels:</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="s">      app: multi-deployment</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="s">  template:</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="s">    metadata:</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="s">      labels:</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="s">        app: multi-deployment</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="s">    spec:</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="s">      containers:</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="s">      - image: alpine:latest</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="s">        imagePullPolicy: Always</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="s">        name: first</span>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="s">        command: [&quot;/bin/sh&quot;, &quot;-c&quot;]</span>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="s">        args:</span>
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="s">          - echo &#39;{&quot;level&quot;:&quot;info&quot;,&quot;message&quot;:&quot;starting&quot;,&quot;container&quot;:&quot;first&quot;}&#39;;</span>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="s">            sleep 5;</span>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="s">            echo &#39;{&quot;level&quot;:&quot;warn&quot;,&quot;message&quot;:&quot;something is not quite right&quot;,&quot;container&quot;:&quot;first&quot;}&#39;;</span>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a><span class="s">            tail -f /dev/null</span>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="s">      - image: alpine:latest</span>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="s">        imagePullPolicy: Always</span>
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="s">        name: second</span>
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a><span class="s">        command: [&quot;/bin/sh&quot;, &quot;-c&quot;]</span>
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a><span class="s">        args:</span>
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="s">          - echo &#39;{&quot;level&quot;:&quot;info&quot;,&quot;message&quot;:&quot;starting&quot;,&quot;container&quot;:&quot;second&quot;}&#39;;</span>
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a><span class="s">            sleep 2;</span>
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="s">            echo &#39;{&quot;level&quot;:&quot;warn&quot;,&quot;message&quot;:&quot;Redrum. Redrum. REDRUM!&quot;,&quot;container&quot;:&quot;second&quot;}&#39;;</span>
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="s">            tail -f /dev/null</span>
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a><span class="s">EOF</span>
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a>
<a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a>k<span class="w"> </span>apply<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>-f<span class="w"> </span>multi-deployment.yaml
</code></pre></div>
<p>dumping the logs in <code>json</code> format still encodes the real logs as a <code>message</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>stern<span class="w"> </span>multi<span class="w"> </span>-o<span class="w"> </span>json<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>+<span class="w"> </span>multi-deployment-6f9fb8c49d-l4tzx<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>+<span class="w"> </span>multi-deployment-6f9fb8c49d-l4tzx<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="o">{</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;{\&quot;level\&quot;:\&quot;info\&quot;,\&quot;message\&quot;:\&quot;starting\&quot;,\&quot;container\&quot;:\&quot;second\&quot;}&quot;</span>,
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">  </span><span class="s2">&quot;nodeName&quot;</span>:<span class="w"> </span><span class="s2">&quot;demo-worker&quot;</span>,
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">  </span><span class="s2">&quot;namespace&quot;</span>:<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">  </span><span class="s2">&quot;podName&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">  </span><span class="s2">&quot;containerName&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="o">}</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="o">{</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;{\&quot;level\&quot;:\&quot;warn\&quot;,\&quot;message\&quot;:\&quot;Redrum. Redrum. REDRUM!\&quot;,\&quot;container\&quot;:\&quot;second\&quot;}&quot;</span>,
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">  </span><span class="s2">&quot;nodeName&quot;</span>:<span class="w"> </span><span class="s2">&quot;demo-worker&quot;</span>,
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">  </span><span class="s2">&quot;namespace&quot;</span>:<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">  </span><span class="s2">&quot;podName&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">  </span><span class="s2">&quot;containerName&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="o">}</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="o">{</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;{\&quot;level\&quot;:\&quot;info\&quot;,\&quot;message\&quot;:\&quot;starting\&quot;,\&quot;container\&quot;:\&quot;first\&quot;}&quot;</span>,
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">  </span><span class="s2">&quot;nodeName&quot;</span>:<span class="w"> </span><span class="s2">&quot;demo-worker&quot;</span>,
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">  </span><span class="s2">&quot;namespace&quot;</span>:<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="w">  </span><span class="s2">&quot;podName&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="w">  </span><span class="s2">&quot;containerName&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="o">}</span>
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a><span class="o">{</span>
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;{\&quot;level\&quot;:\&quot;warn\&quot;,\&quot;message\&quot;:\&quot;something is not quite right\&quot;,\&quot;container\&quot;:\&quot;first\&quot;}&quot;</span>,
<a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="w">  </span><span class="s2">&quot;nodeName&quot;</span>:<span class="w"> </span><span class="s2">&quot;demo-worker&quot;</span>,
<a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="w">  </span><span class="s2">&quot;namespace&quot;</span>:<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a><span class="w">  </span><span class="s2">&quot;podName&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a><span class="w">  </span><span class="s2">&quot;containerName&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>
<a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a><span class="o">}</span>
</code></pre></div></p>
<p>Stern can now dump real <code>json</code> when you already have <code>json</code> logs by using the <code>extjson</code> output:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>stern<span class="w"> </span>multi<span class="w"> </span>-o<span class="w"> </span>extjson<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>+<span class="w"> </span>multi-deployment-6f9fb8c49d-l4tzx<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>+<span class="w"> </span>multi-deployment-6f9fb8c49d-l4tzx<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="o">{</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>,
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="s2">&quot;level&quot;</span>:<span class="w"> </span><span class="s2">&quot;info&quot;</span>,
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;starting&quot;</span>,
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="o">}</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="o">{</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>,
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">    </span><span class="s2">&quot;level&quot;</span>:<span class="w"> </span><span class="s2">&quot;warn&quot;</span>,
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">    </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;something is not quite right&quot;</span>,
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">    </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="o">}</span>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="o">{</span>
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>,
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">    </span><span class="s2">&quot;level&quot;</span>:<span class="w"> </span><span class="s2">&quot;info&quot;</span>,
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">    </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;starting&quot;</span>,
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="w">    </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="o">}</span>
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="o">{</span>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>,
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="w">    </span><span class="s2">&quot;level&quot;</span>:<span class="w"> </span><span class="s2">&quot;warn&quot;</span>,
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="w">    </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;Redrum. Redrum. REDRUM!&quot;</span>,
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="w">    </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="o">}</span>
</code></pre></div></p>
<p>This is far more readable.</p>
<p>The last <code>stern</code> option is the <code>ppextjson</code> json, which will pretty-print and colorize the output so it is not needed to use <code>jq</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>stern<span class="w"> </span>multi<span class="w"> </span>-o<span class="w"> </span>ppextjson<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
</code></pre></div>
<div class="highlight"><span class="filename">output</span><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>+<span class="w"> </span>multi-deployment-6f9fb8c49d-l4tzx<span class="w"> </span>›<span class="w"> </span>second
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>+<span class="w"> </span>multi-deployment-6f9fb8c49d-l4tzx<span class="w"> </span>›<span class="w"> </span>first
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="o">{</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>,
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;starting&quot;</span>,<span class="s2">&quot;container&quot;</span>:<span class="s2">&quot;second&quot;</span><span class="o">}</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="o">}</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="o">{</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;second&quot;</span>,
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;warn&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Redrum. Redrum. REDRUM!&quot;</span>,<span class="s2">&quot;container&quot;</span>:<span class="s2">&quot;second&quot;</span><span class="o">}</span>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="o">}</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="o">{</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>,
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;starting&quot;</span>,<span class="s2">&quot;container&quot;</span>:<span class="s2">&quot;first&quot;</span><span class="o">}</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="o">}</span>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="o">{</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">  </span><span class="s2">&quot;pod&quot;</span>:<span class="w"> </span><span class="s2">&quot;multi-deployment-6f9fb8c49d-l4tzx&quot;</span>,
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">  </span><span class="s2">&quot;container&quot;</span>:<span class="w"> </span><span class="s2">&quot;first&quot;</span>,
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;warn&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;something is not quite right&quot;</span>,<span class="s2">&quot;container&quot;</span>:<span class="s2">&quot;first&quot;</span><span class="o">}</span>
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="o">}</span>
</code></pre></div></p>
</li>
</ul>
<h2 id="next">Next<a class="headerlink" href="#next" title="Permanent link">&para;</a></h2>
<p>Cloud Kubernetes is a thing now. Learn how to install and configure it in <a href="../../cloud_commands/">next chapter</a>.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/cloudnativeca" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>